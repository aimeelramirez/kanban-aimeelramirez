let sectionId=document.querySelectorAll("section");const dataArray=[],utilSort=e=>{e.items.sort(function(e,t){return e.id-t.id})},getBackLog=(e,t)=>{let i=e.querySelectorAll("article");i[i.length-1].remove();for(let i=0;i<t.items.length;i++)utilSort(t),e.innerHTML+=` <article  aria-labelledby='${sectionId[0].id}' id='${t.items[i].id}'><span>`+t.items[i].id+"</span>"+`<button aria-label="button"class="editTask" id="editTask-${t.items[i].id}" type="button"><strong>Edit</strong></button>`+"<h3>"+t.items[i].title+"</h3><p>"+t.items[i].description+"</p>"+`\n      <form>\n            <label for="${sectionId[0].id}-date-created-${i}">${sectionId[0].id}-date-created-${i}</label>\n            <input\n              type="date"\n              id="${sectionId[0].id}-date-created-${i}"\n              for="${sectionId[0].id}-date-created-${i}"\n              name="date-created"\n             value="`+t.items[i].dueDate+'"/></form>\n          </article>'},getImplementation=(e,t)=>{let i=e.querySelectorAll("article");i[i.length-1].remove();for(let i=0;i<t.items.length;i++)utilSort(t),e.innerHTML+=` <article  aria-labelledby='${sectionId[1].id}' id='${t.items[i].id}'><span>`+t.items[i].id+"</span>"+`<button aria-label="button" class="editTask" id="editTask-${t.items[i].id}" type="button"><strong>Edit</strong></button>`+"<h3>"+t.items[i].title+"</h3><p>"+t.items[i].description+"</p>"+`<form>\n            <label for="${sectionId[1].id}-date-created-${i}">${sectionId[1].id}-date-created-${i}</label>\n            <input\n              type="date"\n              id="${sectionId[1].id}-date-created-${i}"\n             for="${sectionId[1].id}-date-created-${i}"\n              name="date-created"\n             value="`+t.items[i].dueDate+'"/></form>\n          </article>'},getComplete=(e,t)=>{let i=e.querySelectorAll("article");i[i.length-1].remove();for(let i=0;i<t.items.length;i++)utilSort(t),e.innerHTML+=` <article aria-labelledby='${sectionId[2].id}' id='${t.items[i].id}'><span>`+t.items[i].id+"</span>"+`<button aria-label="button" class="editTask" id="editTask-${t.items[i].id}" type="button"><strong>Edit</strong></button>`+"<h3>"+t.items[i].title+"</h3><p>"+t.items[i].description+"</p>"+`<form>\n      <label for="${sectionId[2].id}-date-created-${i}">${sectionId[2].id}-date-created-${i}</label>\n            <input\n              type="date"\n              id="${sectionId[2].id}-date-created-${i}"\n              for="${sectionId[2].id}-date-created-${i}"\n              name="date-created"\n             value="`+t.items[i].dueDate+'"/></form>\n          </article>'},getDeleteTask=e=>{console.log("this is to be selected to delete: "+e.length);for(let t in e)dataArray.push({id:parseInt(t)+1,item:e[t]});let t=[],i=0,n=0;t=document.querySelectorAll("article");for(let a=0;a<t.length;a++)if(null!=t[a].querySelector("span")){let l=t[a].querySelector("span").innerText;parseInt(t[a].id);if(t[a].id===l){let l=()=>{t[a].style.cssText="color: purple; transform: scale(1.075);  box-shadow: 0 10px 6px -6px black; transition-duration: 0.4s; border-radius: 0.5rem;"},d=()=>{t[a].style.cssText="width:100%; color:black;"},r=t=>{t.preventDefault(),n=t.path[1].id;for(let a=0;a<dataArray.length;a++){let l=t.path[1];document.createElement("article").id="message";let d=document.getElementById("modal-dialog");if(l.id==dataArray[a].item.id)if("none"==d.style.display){d.style.display="flex",d.innerHTML='<article id="editDialog"><p><button id="exit" type="button"><strong>Exit</strong></button></p><h2>Edit Form:üìù</h2> <form name="newerTask" id="editFormPut">'+`<input name="newTitle" id="newTitle" required="" placeholder="${dataArray[a].item.title}"/>`+`<textarea name="newDescription"  id="newDescription" placeholder="${dataArray[a].item.description}" required="" ></textarea>`+`<input name="newDate" type="date" value="${dataArray[a].item.dueDate}" required="" id="newDate">`+'<span id="wrapper"><button id="submitEdit" type="button"><strong>submit</strong></button> <button id="deleteTask" type="button"><strong>delete</strong></button></span></form></article>';let t=document.getElementById("editFormPut"),l=t.elements;e[n-1];l[0].value=dataArray[a].item.title,l[1].value=dataArray[a].item.description,l[2].value=dataArray[a].item.dueDate;let r=JSON.stringify(dataArray[a].item.listId);i=parseInt(r);l[0].value,l[1].value,l[2].value;let u=document.querySelector("span");u.querySelector("#submitEdit").addEventListener("click",()=>{let e=t.elements;e[0].value=e.newTitle.value,e[1].value=e.newDescription.value,e[2].value=e.newDate.value;let a={title:e[0].value,description:e[1].value,dueDate:e[2].value,listId:i};return putDataAPI(a,n)}),u.querySelector("#deleteTask").addEventListener("click",o),document.getElementById("exit").addEventListener("click",s)}else d.style.display="none"}},o=e=>{e.preventDefault();let t=document.getElementById("modal-dialog"),i=document.createElement("article");i.id="confirmation",t.insertAdjacentElement("beforebegin",i);let n=document.getElementById("confirmation"),a=document.getElementById("editFormPut");e.path;for(let e=0;e<dataArray.length;e++)if(a[0].value==dataArray[e].item.title){n.innerHTML=`<h2>Are you sure you want to delete?</h2><p>Title:${a[0].value}<br/>\n`+"Description:"+a[1].value+' </p><button id="unsure">Oops, nope!</button>\n<button id="absolutely">Yes, for sure!</button></p>';let t=document.getElementById("absolutely"),i=t=>(t.preventDefault(),"absolutely"==t.target.id?(n.innerHTML="",deleteDataAPI(dataArray[e].item)):(n.innerHTML="<p> Okay, cancelled.</p>",window.setTimeout(()=>{n.innerHTML=""},2e3),null));document.getElementById("unsure").onclick=i,t.onclick=i}},s=e=>{e.preventDefault();let t=document.getElementById("modal-dialog"),i=document.getElementById("confirmation");null!=i&&(i.innerHTML=""),t.innerHTML=""},u=document.querySelectorAll("button");console.log("edit"+u);for(let e=0;e<u.length;e++)u[e].addEventListener("click",r);t[a].onmouseover=l,t[a].onmouseout=d}}};